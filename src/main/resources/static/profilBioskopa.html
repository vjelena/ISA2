<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Profil bioskopa</title>
		<script src="scripts/jquery-3.2.1.min.js"></script>
		<link href="bootstrapB/css/bootstrap.css" rel="stylesheet" type="text/css"/>
		<script src="bootstrapB/js/bootstrap.js" type="text/javascript"></script>
		
		<script>
		$.urlParam = function(name){
		    var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
		    if (results==null){
		       return null;
		    }
		    else{
		       return decodeURI(results[1]) || 0;
		    }
		};
	$(document).ready(
			function() {
				$.ajax({
					url : "http://localhost:8080/bioskopi/" + $.urlParam('id')
				}).then(
						function(data) {
							console.log("Lista sala:" + data.listaSala);
							$("#opisBioskopa").append(data.opis);
							$("#imeBioskopa").append(data.naziv);
							
							for(i=0; i<data.repertoar.length; i++){
								var repertoar = data.repertoar[i];
								var imeBioskopa = repertoar.bioskop.naziv;
								var projekcije = repertoar.projekcije;
								
								for(j=0; j<projekcije.length; j++){
									var glumacIme = projekcije[j].glumci.ime;
									var glumacPrezime = projekcije[j].glumci.prezime;
									newRow = "<tr><td class=\"naziv\">" + projekcije[j].naziv + "</td>"
									+ "<td class=\"reditelj\">"+ projekcije[j].reditelj + "</td>"
									+ "<td class=\"glumci\">"+ projekcije[j].glumacIme + " "+ projekcije[j].glumacPrezime + "</td>"
									+ "<td class=\"zanr\">"+ projekcije[j].zanr + "</td>"
									+ "<td class=\"trajanje\">"+ projekcije[j].trajanje + "</td>"
									$("#tabelaRepertoar").append(newRow)
								}
							}
							
						});
			});
		</script>
	</head>

	<body>
		<div class="row">
			<div class="col-lg-12 col-lg-9"></div>
  			<div class="col-lg-6 col-lg-3">
			    <div class="form-group">
			    	<form action="index.html" class="form-horizontal">
				        <div class="col-lg-4">
				            <input class="btn btn-primary" type="submit" value="Odjavi se">
				        </div>
			        </form>
			    </div>
  			</div>
		</div>
	
		<div class="tabcontent" style="padding-top:20px">
			<div class="form-group col-lg-2" style="padding-left:30px" id="tabLevo">
				<img class="img-thumbnail" src="slike/arenaCineplex.jpg" height="190" width="190"/>				
				<form action="/azuriranje" class="form-horizontal">
					<div class="text-center" style="padding-top:10px">
						<img src="slike/azuriranje.jpg" class="rounded" height="20" width="20">
				    	<input class="btn btn-link" type="submit" value="Azuriraj podatke">
				    </div>
				</form>
				
				<form action="istorijaPoseta.html" class="form-horizontal">
					<div class="text-center" style="padding-top:10px">
				    	<input class="btn btn-info" type="submit" value="Konfiguracija sala">
				    </div>
				</form>
				<form action="istorijaPoseta.html" class="form-horizontal">
					<div class="text-center" style="padding-top:10px">
				    	<input class="btn btn-info" type="submit" value="Brza rezervacija">
				    </div>
				</form>
				<form action="rezervacije.html" class="form-horizontal">
					<div class="text-center" style="padding-top:10px">
				    	<input class="btn btn-info" type="submit" value="Izvestaj o poslovanju">
				    </div>
				</form>
				<form action="prikazBioskopa.html" class="form-horizontal">
					<div class="row justify-content-md-center" style="padding-top:10px"  >
				    	<h2 style="color:#069"> Repertoar </h2>
				    </div>
				</form>
			</div>
			
			<div class="form-group col-lg-2" id="imeBioskopa">
				<p id="imeBioskopa"></p>
			</div>
			
			<div class="form-group col-lg-6" id="opisBioskopa">
				<p id="opisBioskopa"></p>
			</div>
			
			
			
			<div class="form-group col-lg-15" id="tabDinamickiPrikazPrijatelja">
				<div class="tabcontent" style="padding-top: 20px">
				
					<div class="form-group col-lg-1" id="tabIzmedju"></div>	
					
				</div>
				<table id="tabelaRepertoar" class="table table-hover table-bordered">
	  				<thead class="thead-dark">
	    				<tr>
	      					<th scope="col" class="text-center">Naziv filma</th>
	      					<th scope="col" class="text-center">Reditelj</th>
	      					<th scope="col" class="text-center">Glumci</th>
	      					<th scope="col" class="text-center">Zanr</th>
	      					<th scope="col" class="text-center">Trajanje</th>
	      					<th></th>
	    				</tr>
	  				</thead>
				</table>
			</div>			
		</div>
	</body>
</html>